let fileInfoList=null,fileIndex=0,getFrameNum=e=>"00000".substr(0,5-e.toString().length)+e+".svg";addEventListener("message",function(e){let t=()=>{let e=fileInfoList[fileIndex++],t=e[0],s=e[1],n=e[2],a=e[3],o=1,d=new XMLHttpRequest,l=d.onreadystatechange=function(e){let r=e.target;if(4==r.readyState){if(200!=r.status&&0!=r.status||""==r.responseText)return console.error("failed to read file: "+r.responseURL),void console.error(r.statusText);if(postMessage({cmd:"new-svg",actionName:n,frame:o,svg:r.responseText}),delete d,o<=s)return(d=new XMLHttpRequest).open("GET",a+getFrameNum(o++),!0),d.onreadystatechange=l,void d.send();fileIndex<fileInfoList.length?postMessage({cmd:"load-add",kind:t,actionName:n,totalFrames:s}):(postMessage({cmd:"load-complete",kind:t,actionName:n,totalFrames:s}),close())}};d.open("GET",a+getFrameNum(o++),!0),d.send()},s=e.data;switch(s.cmd){case"load":fileIndex=0,fileInfoList=s.fileInfoList,t();break;case"load-next":t();break;default:console.error("unknown command: "+s.cmd)}},!1);
let fileInfoList=null,fileIndex=0,getFrameNum=e=>"00000".substr(0,5-e.toString().length)+e+".svg";addEventListener("message",function(e){let t=()=>{let e=fileInfoList[fileIndex++],t=e[0],n=e[1],s=e[2],a=e[3],o=1,d=new XMLHttpRequest,l=d.onreadystatechange=function(e){let r=e.target;if(4==r.readyState){if(200!=r.status&&0!=r.status||""==r.responseText)return console.error("failed to read file: "+i),void console.error(r.statusText);if(postMessage({cmd:"new-svg",actionName:s,frame:o,svg:r.responseText}),delete d,o<=n)return i=a+getFrameNum(o++),(d=new XMLHttpRequest).open("GET",i,!0),d.onreadystatechange=l,void d.send();fileIndex<fileInfoList.length?postMessage({cmd:"load-add",kind:t,actionName:s,totalFrames:n}):(postMessage({cmd:"load-complete",kind:t,actionName:s,totalFrames:n}),close())}},i=a+getFrameNum(o++);d.open("GET",i,!0),d.send()},n=e.data;switch(n.cmd){case"load":fileIndex=0,fileInfoList=n.fileInfoList,t();break;case"load-next":t();break;default:console.error("unknown command: "+n.cmd)}},!1);